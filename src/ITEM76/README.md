# ITEM76 가능한 한 실패 원자적으로 만들라

- 호출된 메서드가 실패하더라도 해당 객체는 메서드 호출 전 상태를 유지해야 한다.(실패 원자적)
- 실패 원자적으로 만드는 방법
    - 불변 객체로 설계
    - 가변 객체는 매개변수 유효성 검사
    ```java
    public Object pop() {
        if (size == 0) {    // 매개변수 유효성 검사
            throw new EmptyStackException();    
        }
        Object result = elemnts[--size];    // 매개변수 유효성 검사 하지 않으면 size 음수로 변경됨.
        elements[size] = null // 다 쓴 참조 해제
        return result;
    }
    ```
    - 객체으 임시 복사본에서 작업을 수행, 완료되면 원래 객체와 교체
    - 작업 도중 발생하는 실패를 가로채는 복구 코드를 작성하여 객체를 작업 전 상태롤 되돌리는 방법
- 예외가 발생핟더라도 객체의 상태는 메서드 호출 전과 똑같이 유지돼야 한다는 것이 기본 규칙이다. 이 규칙을 지키지 못한다면 실패 시의 객체 상태를 API 설명에 명시해야 한다.